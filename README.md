    PZ5 Технологии индустриального программирования.  
    Студент: Выборнов О.А.  
    Группа: ЭФМО-02-25  
    
Цели работы: 
        
        -Установить и настроить PostgreSQL локально.
        -Подключиться к БД из Go с помощью database/sql и драйвера PostgreSQL.
        -Выполнить параметризованные запросы INSERT и SELECT.
        -Корректно работать с context, пулом соединений и обработкой ошибок. 

Как запустить:

1)cклонировать репозиторий:

    git clone -b main --single-branch https://github.com/omnikk/PZ5.git

2)Через cmd командой "go run ."

создание таблицы:

<img width="547" height="754" alt="image" src="https://github.com/user-attachments/assets/ecc217e8-d38b-422b-a5cc-1f0ea6a9e8ce" />

запуск сервера

<img width="995" height="333" alt="image" src="https://github.com/user-attachments/assets/c8bd5c88-ce8d-4420-ba24-ea051280ebb8" />

изменения

<img width="1314" height="429" alt="image" src="https://github.com/user-attachments/assets/823a7893-b699-4ee7-8e7f-343534b2c062" />

Ответы на вопросы:

    1) Что такое пул соединений *sql.DB и зачем его настраивать?

*sql.DB — это пул соединений с PostgreSQL.
Он не хранит одно соединение — он управляет множеством подключений, которые переиспользуются между запросами.

Настройка нужна для:

ограничения нагрузки на БД (MaxOpenConns);

уменьшения времени ожидания (MaxIdleConns);

предотвращения зависания старых соединений (ConnMaxLifetime).

    2) Зачем нужны плейсхолдеры $1, $2?

Это параметризованные запросы.
Они:

защищают от SQL-инъекций;

позволяют эффективно кешировать планы выполнения;

работают быстрее и безопаснее, чем конкатенация строк.

    3) Чем Query, QueryRow и Exec отличаются?

Query — выполняет SELECT и возвращает несколько строк (rows).

QueryRow — выполняет SELECT и возвращает одну строку.

Exec — для запросов без результата: INSERT/UPDATE/DELETE без RETURNING.

    4) Обоснование транзакций

Транзакции нужны для:

атомарности (всё или ничего);

согласованности данных;

корректной массовой вставки.

Если одна вставка в CreateMany падает — откатываются все.

    5) Обоснование настроек пула

MaxOpenConns — ограничивает максимальное количество одновременных соединений, чтобы не перегружать БД.

MaxIdleConns — количество «готовых» соединений для быстрого использования.

ConnMaxLifetime — время жизни соединения, чтобы старые не зависали.


Cтруктура проекта:

    pz5/
      main.go
      db.go 
      repozitory.go  
      go.mod
      go.sum
      README.md

Описание структуры:

    main.go — главная точка входа в приложение
    db.go — модуль для подключения к базе данных
    repozitory.go — сепозиторий отвечающий за работу с данными
    go.mod — файл модуля Go с зависимостями
    go.sum — контрольные суммы зависимостей проекта
